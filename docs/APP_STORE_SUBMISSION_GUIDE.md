# App Store 申請ガイド

## 📱 iOS App Store 申請の完全ガイド

このガイドでは、「宅建合格ロード」アプリを App Store に申請する手順を説明します。

---

## 🎯 事前準備

### ✅ 完了している項目

- [x] アプリアイコン (1024x1024px) 生成完了
- [x] Bundle Identifier 設定: `com.takkenroad.app`
- [x] アプリ表示名: 宅建合格ロード
- [x] In-App Purchase プラグイン実装完了
- [x] サブスクリプション機能実装完了

### 📋 必要なもの

1. **Apple Developer Program アカウント** (年額 $99)

   - https://developer.apple.com/programs/

2. **App Store Connect アカウント**

   - https://appstoreconnect.apple.com/

3. **準備済みの素材**
   - アプリアイコン: `ios/App/App/Assets.xcassets/AppIcon.appiconset/app-icon-1024.png`
   - スクリーンショット (次のセクションで生成)

---

## 📸 スクリーンショット準備

### 必要なサイズ

- **iPhone 6.7 インチ**: 1290 x 2796 px (iPhone 15 Pro Max)
- **iPhone 6.5 インチ**: 1284 x 2778 px (iPhone 14 Pro Max) - オプション
- **iPhone 5.5 インチ**: 1242 x 2208 px (iPhone 8 Plus) - 後方互換

### 推奨スクリーンショット構成

1. **ダッシュボード画面** - メイン機能の概要
2. **問題演習画面** - 学習の様子
3. **AI 先生チャット** - AI 機能のアピール
4. **学習進捗画面** - データ分析機能
5. **サブスクリプション画面** - プレミアム機能

### スクリーンショット撮影方法

Xcode シミュレーターで以下の手順で撮影：

1. Xcode でアプリを起動
2. シミュレーターの種類を選択: **iPhone 15 Pro Max**
3. 各画面で `Cmd + S` でスクリーンショットを保存
4. 保存先: デスクトップ

---

## 🏗️ App Store Connect でアプリ登録

### Step 1: 新規アプリ作成

1. App Store Connect にログイン
2. 「マイ App」→「＋」→「新規 App」
3. 以下の情報を入力：

```
プラットフォーム: iOS
名前: 宅建合格ロード
プライマリ言語: 日本語
Bundle ID: com.takkenroad.app
SKU: TAKKENROAD001
```

### Step 2: App 情報の入力

#### **基本情報**

```
名前: 宅建合格ロード
サブタイトル: AI先生と楽しく学ぶ宅建試験対策
カテゴリ:
  - プライマリ: 教育
  - セカンダリ: 仕事効率化
```

#### **説明文**

```
🏠 宅建合格ロードで、楽しく効率的に宅建試験に合格しよう！

【主な機能】
✅ 過去問演習 - 過去7年分の本試験問題を収録
✅ AI先生チャット - 分からない問題はAIが優しく解説
✅ 弱点分析 - あなたの苦手分野を自動で特定
✅ 学習進捗管理 - 詳細な学習データで成長を可視化
✅ オフライン学習 - インターネット不要でどこでも学習可能

【プレミアム機能】
🌟 AI機能無制限 - 質問し放題
🌟 広告非表示 - 快適な学習環境
🌟 全年度の過去問アクセス - 無料版は直近3年分のみ
🌟 AI問題生成 - あなた専用の問題を自動作成
🌟 詳細な学習分析 - より深い学習データ
🌟 プッシュ通知 - 学習リマインダー
🌟 オフライン拡張 - より多くのコンテンツをダウンロード

【こんな方におすすめ】
- 宅建試験の合格を目指す方
- 通勤・通学時間を有効活用したい方
- 自分のペースで学習したい方
- AI技術を活用した効率的な学習を求める方

宅建試験の合格への最短ルートを、私たちと一緒に歩みましょう！
```

#### **キーワード**

```
宅建,宅地建物取引士,資格試験,過去問,AI学習,教育,不動産,法律,民法,宅建業法
```

#### **サポート URL**

```
https://takkenroad.app/support (準備が必要)
```

#### **マーケティング URL** (オプション)

```
https://takkenroad.app
```

#### **プライバシーポリシー URL**

```
https://takkenroad.app/privacy (既に実装済み)
```

---

## 💰 App 内課金の設定

### Step 1: サブスクリプショングループ作成

1. App Store Connect →「App 内課金」
2. 「サブスクリプショングループを作成」
3. グループ名: `プレミアムプラン`

### Step 2: サブスクリプション商品の追加

```
商品ID: premium_monthly
参照名: プレミアムプラン（月額）
価格: ¥500/月

説明:
  表示名: プレミアムプラン
  説明: AI機能無制限、広告非表示、全年度の過去問アクセスなど、すべての機能が使い放題
```

### Step 3: 審査情報

```
審査メモ:
  このサブスクリプションにより、以下の機能が解放されます：
  - AI先生への質問無制限（無料版は月3回まで）
  - 広告の非表示
  - 全年度の過去問アクセス（無料版は直近3年分のみ）
  - AI問題生成機能
  - 詳細な学習分析
  - プッシュ通知による学習リマインダー
  - オフライン学習の拡張
```

---

## 🔐 プライバシーとデータ収集

### データ収集の申告

App Store Connect で以下の情報を申告：

1. **収集するデータ**

   - 学習進捗データ（ユーザーアカウントにリンク）
   - 使用状況データ（分析用）
   - 広告データ（Google AdSense）

2. **データの使用目的**

   - アプリ機能の提供
   - 分析
   - 広告の最適化

3. **データ保持期間**
   - アカウント削除まで、または明示的な削除要求があるまで

---

## 🎬 App プレビュー（ビデオ）- オプション

### 推奨構成 (30 秒)

1. オープニング (3 秒) - アプリ名とキャッチコピー
2. 問題演習 (8 秒) - 実際の学習の様子
3. AI 先生機能 (8 秒) - チャット画面のデモ
4. 学習進捗 (6 秒) - データ分析画面
5. クロージング (5 秒) - ダウンロード呼びかけ

---

## ✅ 審査前チェックリスト

### アプリの機能

- [ ] すべての機能が正常に動作する
- [ ] クラッシュやバグがない
- [ ] ローディング時間が適切
- [ ] オフライン機能が動作する

### In-App Purchase

- [ ] サブスクリプション購入フローが正常
- [ ] 復元機能が動作する
- [ ] 無料版と有料版の機能制限が正しい
- [ ] 利用規約とプライバシーポリシーへのリンクがある

### UI/UX

- [ ] すべての画面が適切に表示される
- [ ] ボタンやリンクが正常に機能する
- [ ] 日本語表示が正しい
- [ ] アイコンと画像が高品質

### 法的要件

- [ ] プライバシーポリシーが実装されている
- [ ] 利用規約が実装されている
- [ ] App Store Review Guidelines に準拠
- [ ] 著作権や商標の問題がない

---

## 🚀 ビルドとアップロード

### Step 1: Archive の作成

Xcode で以下の手順：

1. メニューバー →「Product」→「Archive」
2. デバイスを「Any iOS Device (arm64)」に設定
3. ビルドが完了するまで待つ

### Step 2: App Store Connect へアップロード

1. Archive 完了後、Organizer が開く
2. 「Distribute App」→「App Store Connect」
3. 「Upload」を選択
4. 証明書とプロビジョニングプロファイルを確認
5. 「Upload」をクリック

### Step 3: ビルドの選択

1. App Store Connect にログイン
2. アプリ →「TestFlight」タブ
3. アップロードしたビルドが表示されるまで待つ（5-10 分）
4. ビルドの横の「+」→「App Store に提出」

---

## 📝 審査提出時の注意事項

### テストアカウント情報

審査員用のテストアカウントを提供：

```
ユーザー名: reviewer@takkenroad.app
パスワード: [安全なパスワード]

注記:
- このアカウントはプレミアムプランが有効化されています
- すべての機能をテストできます
- AI機能のテストには有効なAPI keyが必要です（本番環境では動作します）
```

### 審査メモ

```
【審査員の皆様へ】

このアプリは宅地建物取引士試験（宅建試験）の学習支援アプリです。

＜主な機能＞
1. 過去問演習 - 過去の本試験問題を収録
2. AI先生チャット - OpenAI APIを使用した学習支援
3. サブスクリプション - 月額500円のプレミアムプラン

＜テスト手順＞
1. 提供したテストアカウントでログイン
2. ダッシュボードから「学習開始」→「過去問演習」を選択
3. 任意の問題を解答
4. 「AI先生に質問」でAI機能をテスト
5. 設定画面からサブスクリプション状態を確認

＜注意事項＞
- AI機能は本番環境でのみ動作します
- オフライン学習機能のテストには、一度オンラインで問題をキャッシュする必要があります
- 広告はGoogle AdSenseを使用しており、審査環境ではテスト広告が表示されます

ご不明な点がございましたら、サポートURLからお問い合わせください。
```

---

## 🎯 審査のタイムライン

| ステップ           | 所要時間   |
| ------------------ | ---------- |
| ビルドアップロード | 即時       |
| 処理中             | 5-30 分    |
| 審査待ち           | 1-3 日     |
| 審査中             | 24-48 時間 |
| 承認/リジェクト    | 即時       |

---

## ❌ よくあるリジェクト理由と対策

### 1. 最小限の機能不足 (Guideline 4.2)

**対策**: アプリは十分な過去問と AI 機能を提供しており、教育的価値が高い

### 2. In-App Purchase の説明不足 (Guideline 3.1.2)

**対策**: サブスクリプション画面で機能の違いを明確に表示

### 3. プライバシーポリシーの不備 (Guideline 5.1.1)

**対策**: 詳細なプライバシーポリシーを実装済み

### 4. デモアカウントの不提供 (Guideline 2.1)

**対策**: 審査員用のテストアカウントを提供

---

## 📞 サポート体制

### 必要なページ（実装前）

1. **サポートページ** - `https://takkenroad.app/support`
2. **FAQ** - よくある質問
3. **お問い合わせフォーム** - Firebase Functions + メール送信

### 実装例

```typescript
// pages/support.tsx
export default function SupportPage() {
  return (
    <div>
      <h1>サポート</h1>
      <section>
        <h2>よくある質問</h2>
        {/* FAQ content */}
      </section>
      <section>
        <h2>お問い合わせ</h2>
        {/* Contact form */}
      </section>
    </div>
  );
}
```

---

## 🎉 承認後のステップ

1. **リリース**

   - App Store Connect で「リリース」をクリック
   - 通常 24 時間以内に App Store に公開

2. **マーケティング**

   - SNS でアナウンス
   - ウェブサイトで告知
   - プレスリリース

3. **モニタリング**

   - レビューの監視と返信
   - クラッシュレポートの確認
   - 利用統計の分析

4. **継続的改善**
   - ユーザーフィードバックの収集
   - 新機能の開発
   - 定期的なアップデート

---

## 📚 参考リンク

- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [In-App Purchase Guidelines](https://developer.apple.com/in-app-purchase/)
- [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [App Store Connect Help](https://help.apple.com/app-store-connect/)

---

## ✅ 次のアクション

1. [ ] Apple Developer Program に登録
2. [ ] App Store Connect でアプリを作成
3. [ ] スクリーンショットを撮影・準備
4. [ ] サブスクリプション商品を設定
5. [ ] サポートページを実装
6. [ ] Xcode でビルドをアーカイブ
7. [ ] App Store Connect にアップロード
8. [ ] 審査に提出

**準備が整ったら、実際の申請を開始しましょう！** 🚀
