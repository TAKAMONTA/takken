# 🌐 Comet ブラウザ用 In-App Purchase 設定プロンプト

## 📋 事前準備

このプロンプトは、App Store Connect でアプリ作成が完了した後に使用します。

---

## 🤖 Comet ブラウザ アシスタントモード用プロンプト

```
あなたは App Store Connect で「宅建合格ロード」アプリの In-App Purchase（サブスクリプション）を設定するアシスタントです。
以下の手順に従って、可能な限り自動で設定作業を進めてください。

【目標】
プレミアムプラン（月額500円）のサブスクリプション商品を作成する

【前提条件】
- App Store Connect で「宅建合格ロード」アプリが作成済み
- App Store Connect にログイン済み
- アプリの「App内課金」セクションにアクセス可能

【手順1: サブスクリプショングループの作成】
1. アプリの詳細ページで「App内課金」タブをクリック
2. 「サブスクリプション」セクションを選択
3. 「サブスクリプショングループを作成」をクリック
4. 以下の情報を入力：
   - **グループ参照名**: premium_subscription_group
   - **グループ表示名（日本語）**: プレミアムプラン

【手順2: サブスクリプション商品の作成】
1. 作成したグループ内で「サブスクリプションを作成」をクリック
2. 以下の情報を入力：

**基本情報:**
- **参照名**: プレミアムプラン（月額）
- **商品ID**: premium_monthly
- **期間**: 1ヶ月を選択

**価格設定:**
- **価格**: ¥500（日本円）
- 他の国の価格は自動調整でOK

**サブスクリプション表示名（ローカライズ）:**
言語: 日本語
- **名前**: プレミアムプラン
- **説明**:
AI機能無制限、広告非表示、全年度の過去問アクセスなど、すべての機能が使い放題。AI先生への質問は無制限、過去7年分の過去問にアクセス可能、AI問題生成機能、詳細な学習分析、プッシュ通知、オフライン学習の拡張が利用できます。

【手順3: 無料トライアルの設定（推奨）】
- **無料トライアル**: 7日間
- **イントロダクトリオファー**: 有効にする（推奨）

【手順4: 審査情報の入力】

**スクリーンショット:**
- 後でアップロードするため、今はスキップ

**審査メモ:**
以下のテキストを入力：

---
このサブスクリプションにより、以下の機能が解放されます：

【無料版の制限】
• AI先生への質問: 月3回まで
• 過去問アクセス: 直近3年分のみ（令和6年〜令和8年）
• 広告: 表示あり
• AI問題生成: 利用不可
• 詳細な学習分析: 利用不可
• プッシュ通知: 利用不可
• オフライン拡張: 基本機能のみ

【プレミアムプランの機能】
• AI先生への質問: 無制限
• 過去問アクセス: 全年度（令和3年〜令和8年）
• 広告: 非表示
• AI問題生成: 利用可能
• 詳細な学習分析: 利用可能
• プッシュ通知による学習リマインダー: 利用可能
• オフライン学習の拡張: 利用可能

【技術仕様】
• StoreKit 2を使用
• Capacitorプラグインで実装
• サブスクリプション状態はFirestoreに保存
• 自動更新: 有効
• ファミリー共有: 無効

【テスト方法】
1. アプリをインストール
2. 設定画面からサブスクリプション画面に移動
3. 「プレミアムプランにアップグレード」ボタンをタップ
4. Sandbox環境でテスト購入
5. 購入後、AI機能や過去問アクセスが解放されることを確認
---

【手順5: サブスクリプション情報の確認】
設定完了後、以下を確認：
- ✅ 商品ID: premium_monthly
- ✅ 価格: ¥500/月
- ✅ 期間: 1ヶ月
- ✅ 無料トライアル: 7日間
- ✅ 自動更新: 有効
- ✅ 審査メモ: 入力済み

【手順6: 保存と送信】
1. すべての情報を入力したら「保存」をクリック
2. 「審査に提出」ボタンが表示されたら、まだクリックしない
   （アプリ本体と一緒に提出します）

【重要な注意事項】
1. 商品IDは一度作成すると変更できません
2. 価格は後から変更可能です
3. 無料トライアルは初回購入者のみ適用されます
4. ファミリー共有は無効にしてください（個人利用のため）
5. エラーが出た場合は、その内容を報告してください

【完了条件】
以下が完了したら成功です：
✅ サブスクリプショングループが作成された
✅ premium_monthly商品が作成された
✅ 価格が¥500/月に設定された
✅ 表示名と説明が日本語で入力された
✅ 審査メモが入力された
✅ すべての情報が保存された

【作業完了後の報告】
以下の情報を報告してください：
1. サブスクリプション商品が正常に作成されたか
2. 商品ID（premium_monthly）が正しく設定されたか
3. 価格（¥500/月）が正しく設定されたか
4. 無料トライアル（7日間）が設定されたか
5. エラーメッセージがあればその内容

それでは、作業を開始してください。
```

---

## 📝 補足情報

### サブスクリプショングループとは

- 複数のサブスクリプション商品をグループ化する機能
- 今回は 1 つの商品のみですが、将来的に年額プランなどを追加可能

### 価格について

- 日本円で ¥500 を設定すると、他の国の価格は自動で調整されます
- 後から価格変更も可能です

### 無料トライアルについて

- 7 日間の無料トライアルは初回購入者のみ適用
- トライアル期間終了後、自動的に課金開始
- ユーザーはいつでもキャンセル可能

### 審査について

- サブスクリプションは、アプリ本体とは別に審査されます
- 通常、アプリ本体の審査と同時に行われます
- 審査メモで機能の違いを明確に説明することが重要

---

## 🚀 次のステップ（Comet で作業完了後）

### オプション: 追加のプラン作成

将来的に以下のプランも追加可能：

- 年額プラン（¥4,800/年、2 ヶ月分お得）
- 学生プラン（¥300/月、割引あり）

### Mac での作業

1. **スクリーンショット撮影**

   - サブスクリプション画面のスクリーンショット
   - 機能比較画面のスクリーンショット

2. **Xcode でビルド**

   - In-App Purchase の実装確認
   - Sandbox 環境でテスト

3. **審査提出**
   - アプリ本体とサブスクリプションを一緒に提出

---

## ✅ チェックリスト

作業前に確認：

- [ ] アプリ「宅建合格ロード」が作成済み
- [ ] App Store Connect にログイン済み
- [ ] Comet ブラウザのアシスタントモード起動済み
- [ ] このプロンプトをコピー準備完了

作業完了後に確認：

- [ ] サブスクリプショングループ作成済み
- [ ] premium_monthly 商品作成済み
- [ ] 価格 ¥500/月 設定済み
- [ ] 表示名「プレミアムプラン」設定済み
- [ ] 説明文入力済み
- [ ] 無料トライアル 7 日間設定済み
- [ ] 審査メモ入力済み
- [ ] すべて保存済み

---

**このプロンプトを Comet ブラウザのアシスタントモードにコピー&ペーストして、作業を開始してください！** 🚀
